<!DOCTYPE chapter>
<chapter xmlns="http://docbook.org/ns/docbook" version="5.0" xml:id="install" xml:lang="ru">
    <info>
        <title>Установка, обновление и запуск сервера</title>
    </info>

    <para>Скачать дистрибутивы Firebird можно на официальном сайте <link
            xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://firebirdsql.org"/> в
        разделе Downloads.</para>

    <section xml:id="install-windows">
        <title>Установка в ОС Windows</title>

        <para>Firebird под Windows распространяется в двух вариантах: в виде выполняемого файла
            установщика с расширением exe и в виде zip архивов. Для 32-разрядного варианта в имени
            файла содержится суффикс Win32, для 64-разрядного — x64. Отладочный вариант имеет
            дополнительный суффикс pdb.</para>

        <section xml:id="install-windows-exe">
            <title>Установка из исполняемого пакета</title>

            <para>Скачайте и запустите инсталяционный пакет разрядности, соответствующей разрядности
                операционной системы (Win32 может работать на 64-разярдной Windows, но это не имеет
                смысла). Инсталляция СУБД Firebird осуществляется с помощью стандартного мастера
                установки программ. В ходе установки мастер собирает всю необходимую для установки
                сервера информацию, производит копирование файлов и регистрацию программных модулей
                в реестре Windows.</para>
            <note>
                <para>Для установки Firebird необходимы права администратора.</para>
            </note>

            <para>Рекомендуется перед установкой этого пакета ДЕИНСТАЛЛИРОВАТЬ все предыдущие версии
                Firebird или InterBase. Особенно важно убедиться, что файлы
                    <filename>fbclient.dll</filename> и <filename>gds32.dll</filename> удалены из
                каталога <filename>system32</filename>.</para>

            <para>Если вам необходимо установить Firebird 3.0 совместно с другими версиями, то это
                необходимо сделать из zip-архива.</para>

            <para>Выберите язык установки. Предусмотрена установка на русском, английском и других
                языках. <figure>
                    <title>Выбор языка установки</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="images/select-install-lang.png" align="center"/>
                        </imageobject>
                        <textobject>
                            <phrase>Выбор языка установки</phrase>
                        </textobject>
                    </mediaobject>
                </figure>
                <figure>
                    <title>Лицензионное соглашение и информация об установке</title>
                    <para>
                        <inlinemediaobject>
                            <imageobject>
                                <imagedata fileref="images/install-license.png" width="45%"
                                    align="left"/>
                            </imageobject>
                            <textobject>
                                <phrase>Лицензионное соглашение</phrase>
                            </textobject>
                        </inlinemediaobject>
                        <inlinemediaobject>
                            <imageobject>
                                <imagedata fileref="images/install-info.png" width="45%"
                                    align="right"/>
                            </imageobject>
                            <textobject>
                                <phrase>Информация об установке</phrase>
                            </textobject>
                        </inlinemediaobject>
                    </para>
                </figure>
            </para>

            <para>В процессе инсталяции вам будет предложено выбрать папку для установки, а также
                выбрать устанавливаемые компоненты. <figure>
                    <title>Выбор компонентов для установки</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="images/install-select-components.png" width="450"/>
                        </imageobject>
                        <textobject>
                            <phrase>Выбор компонентов для установки</phrase>
                        </textobject>
                    </mediaobject>
                </figure>
            </para>

            <simplesect>
                <title>Выбор архитектуры сервера</title>

                <para>Далее будет предложено выбрать архитектуру сервера и некоторые дополнительные
                    опции. Доступны следующие архитектуры: <itemizedlist>
                        <listitem>
                            <para><emphasis role="bold">Classic</emphasis>: <itemizedlist
                                    spacing="compact">
                                    <listitem>
                                        <para> использует отдельный процесс на каждое
                                            пользовательское соединение; </para>
                                    </listitem>
                                    <listitem>
                                        <para> каждый процесс содержит в себе все что нужно для
                                            работы с базой данных: область памяти для метаданных,
                                            страничный кэш для минимизации повторных чтений из файла
                                            БД; память для сортировок; </para>
                                    </listitem>
                                    <listitem>
                                        <para> если происходит сбой, другие соединения остаются
                                            работоспособными </para>
                                    </listitem>
                                    <listitem>
                                        <para> поддержка мультипроцессорности: в многопроцессорных
                                            системах ОС автоматическираспределяет процессы по
                                            процессорам/ядрам </para>
                                    </listitem>
                                </itemizedlist></para>
                        </listitem>
                        <listitem>
                            <para>
                                <emphasis role="bold">Superserver</emphasis>:<itemizedlist
                                    spacing="compact">
                                    <listitem>
                                        <para> один процесс с общей областью памяти для всех
                                            пользовательских соединений (общий странчный кеш и
                                            память под сортировки); </para>
                                    </listitem>
                                    <listitem>
                                        <para> используется пул потоков ОС для обработки запросов от
                                            соединений, таким образом каждое соединение работает в
                                            отдельном потоке управляемом ОС, а неактивные соединения
                                            не отъедают ресурсы потоков; </para>
                                    </listitem>
                                    <listitem>
                                        <para> каждый поток со своим кэшем метаданных; </para>
                                    </listitem>
                                    <listitem>
                                        <para>поддержка мультипроцессорности: потоки ОС легко
                                            распараллеливаются; </para>
                                    </listitem>
                                    <listitem>
                                        <para> возможный сбой в одном процессе разорвет все
                                            подключения. </para>
                                    </listitem>
                                </itemizedlist></para>
                        </listitem>
                        <listitem>
                            <para>
                                <emphasis role="bold">SuperClassic</emphasis>: <itemizedlist
                                    spacing="compact">
                                    <listitem>
                                        <para>единый процесс на всех пользователей с общей памятью
                                            под сортировки;</para>
                                    </listitem>
                                    <listitem>
                                        <para> используется пул потоков ОС для обработки запросов от
                                            соединений, таким образом каждое соединение работает в
                                            отдельном потоке управляемом ОС, а неактивные соединения
                                            не отъедают ресурсы потоков; </para>
                                    </listitem>
                                    <listitem>
                                        <para> каждый поток со своим страничным кэшем и кэшем
                                            метаданных; </para>
                                    </listitem>
                                    <listitem>
                                        <para>поддержка мультипроцессорности: потоки ОС легко
                                            распараллеливаются; </para>
                                    </listitem>
                                    <listitem>
                                        <para> возможный сбой в одном процессе разорвет все
                                            подключения. </para>
                                    </listitem>
                                </itemizedlist></para>
                        </listitem>
                    </itemizedlist>
                    <figure>
                        <title>Выбор архитектуры</title>
                        <mediaobject>
                            <imageobject>
                                <imagedata fileref="images/install-select-architect.png" width="450"
                                />
                            </imageobject>
                            <textobject>
                                <phrase>Выбор архитектуры</phrase>
                            </textobject>
                        </mediaobject>
                    </figure>
                </para>
                <para>Каждый из режимов стабилен, и нет причин полностью отдавать предпочтение
                    какому то одному. Конечно, у вас могут быть свои собственные конкретные
                    соображения. Если Вы сомневаетесь, просто следуйте за установкой по умолчанию.
                    Позже вы можете изменить архитектуру через файл конфигурации
                        <filename>firebird.conf</filename> (параметр ServerMode), что потребует
                    перезагрузки, но не переустановки.</para>
            </simplesect>

            <simplesect>
                <title>Установка Guardian</title>
                <para>Мы собираемся отказаться от использования Firebird Guardian в будущих версиях.
                    Он не работает в случае архитектуры Classic Server и программа установки не
                    предлагает его установку, если выбрана данная архитектура. Для архитектур
                    SuperServer и SuperClassic установка Firebird Guardian возможна, но по умолчанию
                    не выбрана. </para>
            </simplesect>

            <simplesect>
                <title>Способ запуска сервера Firebird</title>
                <para>Сервер может быть запущен в качестве приложения (менее предпочтительный
                    вариант) или в качестве службы. Для запуска в качестве приложения используется
                    следующая команда:
                    <programlisting>
firebird -a                    
                </programlisting>
                </para>
            </simplesect>

            <simplesect>
                <title>Установка gds32.dll</title>
                <para>По умолчанию данная библиотека не копируется в системные папки Windows в
                    процессе установки. Мы не можем гарантировать, что необходимые библиотеки MS VC
                    runtime будут установлены и доступны в системе. Тем не менее, данная возможность
                    доступна опционально в процессе установки, так же как и копирование
                        <filename>fbclient.dll</filename> в системные папки Windows. Если вы
                    используете данную возможность, то вы должны убедиться, что библиотеки MS VC
                    runtime версии 10.0 установлены в системе. </para>
            </simplesect>

            <simplesect>
                <title>Авторизация с предыдущих версий клиента Firebird</title>
                <para>В Firebird 3.0 по умолчанию используется безопасная парольная аутентификация
                    (SRP). Клиенты Firebird 2.5 и более ранние версии использовали традиционную
                    аутентификацию (Legacy_Auth), которая отключена в Firebird 3.0 по-умолчанию,
                    поскольку не является безопасной.</para>
                <para>Вы можете разрешить авторизацию предыдущими версиями клиентов Firebird в
                    процессе инсталяции. Это можно сделать и после установки изменив параметры <link
                        xmlns:xlink="http://www.w3.org/1999/xlink" linkend="config-param-AuthServer"
                        >AuthServer</link>, <link xmlns:xlink="http://www.w3.org/1999/xlink"
                        linkend="config-param-UserManager">UserManager</link> и <link
                        xmlns:xlink="http://www.w3.org/1999/xlink" linkend="config-param-WireCrypt"
                        >WireCrypt</link>.</para>
            </simplesect>

            <simplesect>
                <title>Пароль SYSDBA</title>
                <para>Изначально в системе существует только один пользователь – администратор
                    сервера SYSDBA (пароль по умолчанию — masterkey). Этот пользователь обладает
                    полными правами на выполнение всех функций по управлению работой сервера и
                    работе с базами данных. В процессе инсталляции Вас попросят изменить пароль
                    данного пользователя в целях безопасности. <figure>
                        <title>Задание пароля SYSDBA</title>
                        <mediaobject>
                            <imageobject>
                                <imagedata fileref="images/install-sysdba-password.png" width="450"
                                />
                            </imageobject>
                            <textobject>
                                <phrase>Задание пароля SYSDBA</phrase>
                            </textobject>
                        </mediaobject>
                    </figure>
                </para>

                <para>После этого шага будет отображено окно, в котором отображаются опции выбранные
                    пользователем, если вас всё устраивает можно начать автоматическую установку
                    сервера.</para>
            </simplesect>
        </section>
        <section xml:id="install-windows-zip">
            <title>Установка из ZIP архива</title>
            <para></para>
        </section>
    </section>
</chapter>
